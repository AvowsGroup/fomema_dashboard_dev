<!DOCTYPE html>
<html lang="en">
<head>
  <title>Fomema Dashboard</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
  <!-- Google Charts -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <!-- Bootstrap -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> -->
  <!-- Date Range Picker -->
  <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <!-- Make sure to include your custom scripts here if needed -->
  <%= stylesheet_link_tag 'bootstrap.min' %>
  <%= stylesheet_link_tag 'stylenew' %>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/assets/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/stylenew.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="/assets/jquery.slim.min.js"></script>
  <script src="/assets/popper.min.js"></script>
  <script src="/assets/bootstap.js"></script>
  <link rel="stylesheet" type="text/css" href="/assets/daterangepicker.css"/>
  <script type="text/javascript" src="/assets/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/moment.min.js"></script>
  <script type="text/javascript" src="/assets/daterangepicker.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
</head>
<body class="noscrolbar">
<div class="header">
  <nav class="navbar navbar-expand-md bg-light navbar-dark">
    <div class="admin-logo">
      <img src="/assets/logo.png">
    </div>
    <!-- Topbar Search -->
    <div class="nav-title">
      <span>Dashboard </span>
      <h1>Foreign Workers Information</h1>
    </div>
    <!-- Topbar Navbar -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <div class="filter-content mx-0 px-0">
          <div class="filter-li">
                <span id="sidebarCollapse">
                  <b>
                    <i class="fa fa-filter"></i>
                  </b> &nbsp;Filter By </span>
          </div>
        </div>
      </li>
      <li class="nav-item dropdown">
        <div class="filter-content mx-0 px-0 no-arrow" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <div class="filter-li">
                <span>
                  <b>
                    <i class="fa fa-download" aria-hidden="true"></i>
                  </b> &nbsp;Export </span>
            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in m-0 p-0" aria-labelledby="userDropdown">
              <ul class="li-profile">
                <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a onclick="excel_generate()" class="dropdown-item">
                    <i class="fa fa-file-pdf-o"></i>Excel </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </li>
      <!-- Dropdown - User Information -->
      <li class="nav-item dropdown">
        <div class="filter-content mx-0 px-0" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <div class="filter-li">
                <span>
                  <b>
                    <i class="fa fa-refresh" aria-hidden="true"></i>
                  </b> &nbsp;Refresh </span>
            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in m-0 p-0" aria-labelledby="userDropdown">
              <ul class="li-profile">
                <li onclick="setReloadInterval(5*60)" style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item"> 5 Min </a>
                </li>
                <li onclick="setReloadInterval(10*60)" style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item">10 Min</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      <li class="nav-item dropdown mx-2">
        <a class="nav-link admin-name dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <span>Dashboard</span>
        </a>
        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in m-0 p-0" aria-labelledby="userDropdown">
          <ul class="li-profile">
            <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
              <a class="dropdown-item" href="/dashboards/fw_information/index">
                <i class="fa fa-dashboard mx-2"></i>Dashboard 1 </a>
            </li>
            <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
              <a class="dropdown-item" href="/geographical/index">
                <i class="fa fa-dashboard mx-2"></i>Dashboard 2 </a>
            </li>
            <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
              <a class="dropdown-item" href="/third_dashboard/index">
                <i class="fa fa-dashboard mx-2"></i>Dashboard 3 </a>
            </li>
            <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
              <a class="dropdown-item" href="dashboard-4.html">
                <i class="fa fa-dashboard mx-2"></i>Dashboard 4 </a>
            </li>
            <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
              <a class="dropdown-item" href="dashboard-5.html">
                <i class="fa fa-dashboard mx-2"></i>Dashboard 5 </a>
            </li>
          </ul>
        </div>
      </li>
      </li>
    </ul>
  </nav>
</div>
<div class="dashboard-body">
  <div class="chard-box">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
        </div>
      </div>
    </div>
  </div>
</div>
<div>
  <div class="wrapper">
    <!-- Sidebar  --><%= render 'side_bar' %>
    <!-- Page Content  -->
    <div id="dash_board_1"><%= render 'dash_board_1_body' %>
    </div>
  </div>
</div>
</body>
</html>
<script type="text/javascript">
    var checkedValues = {};
    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
        });

        $('#sectorcheckall').on("click", function () {
            $('input[name="sectorcheck"]').click();
        });

        $('#statecheckall').on("click", function () {
            $('input[name="statecheck"]').click();
        });

        $('#countrycheckall').on("click", function () {
            var countryCheckboxes = $('input[name="countrycheck"]');
            countryCheckboxes.prop('checked', this.checked);

            // Check or uncheck the "Others" checkbox as well
            $('#Country input[name="countrycheck"][value="Others"]').prop('checked', this.checked);

            // Add "Others" and all countries to the selected values
            var allCountries = <%= @countries.to_json.html_safe %>;
            checkedValues['Country'] = ['Others'].concat(allCountries);
        });

        $('#agecheckall').on("click", function () {
            $('input[name="agecheck"]').click();
        });

        $('#gendercheckall').on("click", function () {
            $('input[name="gendercheck"]').click();
        });

        $('#registrationcheckall').on("click", function () {
            $('input[name="registrationcheck"]').click();
        });

        $('#foreignworkercheckall').on("click", function () {
            $('input[name="foreignworkercheck"]').click();
        });

    });

    function filtervalues() {
        var checkedValues = {};

        checkedValues['Sector'] = $('input[name="sectorcheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        // console.log('checkedValues:', checkedValues['Sector'])

        checkedValues['Country'] = $('input[name="countrycheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        checkedValues['State'] = $('input[name="statecheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        console.log('checkedValues:', checkedValues['State'])

        checkedValues['Gender'] = $('input[name="gendercheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        checkedValues['age'] = $('input[name="agecheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        console.log('checkedValues:', checkedValues['age'])

        checkedValues['ForeginWorker'] = $('input[name="foreignworkercheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        console.log('checkedValues:', checkedValues['ForeginWorker'])

        checkedValues['Registration'] = $('input[name="registrationcheck"]:checked').map(function () {
            return $(this).val();
        }).get().join(' ');

        console.log('checkedValues:', checkedValues['Registration'])


        $.ajax({
            type: 'GET',
            url: '/dashboards/fw_information/filterapply',

            data: checkedValues,
            error: function (jqXHR, textStatus, errorThrown) {
            },

            success: function (data, textStatus, jqXHR) {

            }

        });

        console.log('checkedValues:', checkedValues)
    }

    function clear_filter() {
        location.reload();
    }

</script>


<script type="text/javascript">
    function excel_generate() {
        var csrfToken = document.querySelector('meta[name="csrf-token"]').content;

        var form = $('<form action="/dashboards/fw_information/excel_generate" method="post"></form>');
        $('body').append(form);

        form.append('<input type="hidden" name="authenticity_token" value="' + csrfToken + '">');
        form.submit();
        form.remove();
    }


</script>






